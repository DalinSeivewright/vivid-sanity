Parts of haishoku, a python library written by Lance Gin was ported to Java to enable image palette generation.
The relevant ported code can be mostly found in ImageManipulationService.java (getPalette and subsequent code calls)
The python library can be found at https://github.com/LanceGin/haishoku
